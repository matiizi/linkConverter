## Сервис сокращения ссылок
Spring Boot приложение для создания коротких ссылок с ограничением по времени жизни и количеству переходов.


## Основные возможности
- **Сокращение длинных URL** в формате `clck.ru/xxxxxx`
- **Ограничение переходов** - пользователь задает максимальное количество кликов по ссылке
- **Временное ограничение** - ссылки автоматически удаляются через 20 секунд
- **Статистика пользователей** - отслеживание количества удаленных ссылок
- **Автоматическая очистка** - регулярное удаление просроченных ссылок
- **Сессионная аутентификация** - автоматическое создание пользователя при первом посещении


## Технологии
- **Java Spring Boot** - основной фреймворк
- **Spring Data JPA** - работа с базой данных
- **H2 Database** - in-memory база данных
- **Thymeleaf** - шаблонизатор для веб-интерфейса
- **Spring Scheduling** - автоматическая очистка ссылок


## Конфигурация
## Настройки в application.properties

## База данных H2 (in-memory)
- spring.datasource.url=jdbc:h2:mem:testdb
- spring.jpa.hibernate.ddl-auto=create-drop
## Порт сервера
server.port=8080
## Отображение SQL запросов (для разработки)
spring.jpa.show-sql=true


## Основные зависимости в pom.xml
- spring-boot-starter-web - веб-функциональность и Tomcat сервер
- spring-boot-starter-data-jpa - работа с базой данных
- spring-boot-starter-thymeleaf - шаблоны для фронтенда
- h2database - легковесная БД для разработки
- spring-boot-starter-test - тестирование


## Запуск приложения
Откройте проект в вашей IDE.
- Найдите главный класс LinkProjectApplication.java
- Запустите его как обычное Java-приложение.
- Встроенный Tomcat сервер автоматически стартует на порту 8080.


## Использование сервиса
## Создание короткой ссылки
На главной странице введите:
- Длинный URL - ссылка для сокращения
- Количество переходов - лимит кликов по ссылке
- Нажмите кнопку "Сократить"
- В списке ниже появятся созданные короткие ссылки

## Переход по короткой ссылке
- Нажмите на любую созданную короткую ссылку в списке
- Произойдет перенаправление на оригинальный URL
- Счетчик переходов уменьшится на 1


## Тестирование функциональности
## Сценарии для проверки:
Создание ссылки:
- Введите валидный URL (например, https://google.com)
- Установите лимит переходов (например, 3)
- Убедитесь, что короткая ссылка появилась в списке

## Переход по ссылке:
- Кликните на созданную короткую ссылку
- Проверьте, что открывается правильный сайт
- Убедитесь, что счетчик переходов уменьшается

## Проверка лимита переходов:
- Создайте ссылку с лимитом 1
- Перейдите по ней один раз
- При повторном переходе получите сообщение "Лимит переходов по ссылке был исчерпан!"

## Проверка времени жизни:
- Создайте ссылку и подождите 20+ секунд
- Попробуйте перейти - получите сообщение о истечении времени
- На главной странице увидите уведомление об удаленных ссылках

## Обработка ошибок:
- Попробуйте ввести невалидный URL
- Попробуйте ввести отрицательное число переходов
- Убедитесь, что появляются соответствующие предупреждения


## База данных
Приложение использует H2 in-memory базу данных:
- JDBC URL: jdbc:h2:mem:testdb
- Username: sa
- Password: (пусто)


## API endpoints
- GET / - главная страница с формой создания ссылок
- POST / - создание новой короткой ссылки
- GET /redir/{shortUrl} - перенаправление по короткой ссылке


## Особенности реализации
- Каждый пользователь идентифицируется по UUID в сессии
- Ссылки автоматически удаляются каждые 30 секунд через @Scheduled
- Алгоритм генерации коротких ссылок использует MD5 хэш
- Все операции отслеживаются с помощью счетчиков
- Ведется статистика удаленных ссылок по пользователям
